<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Promise对象实现异步加载图片</title>
	</head>
	<body>
	</body>
	<script type="text/javascript">
		/**
		 * 使用【Promise对象】异步加载图片
		 * 封装一个图片加载的异步操作
		 * 如果加载成功，就调用resolve方法；否则就调用reject方法
		 */
		function loadImageAsync(url){
			return new Promise(function(resolve, reject){
				var image = new Image()
				image.onload = function(){
					resolve(image)
					console.log("图片加载成功!")
				}
				image.onerror = function(){
					reject(new Error("Could not load image at" + url))
					console.log("图片加载失败!")
				}
				image.src = url
			})
		}
		var url = "./girl.jpg"
		// 函数的调用
		loadImageAsync(url)
	</script>
</html>
